{"version":3,"sources":["webpack:///webpack/bootstrap 156d798549fc09533f10","webpack:///./src/app.ts","webpack:///./~/acto/src/index.js","webpack:///./src/keyboard.ts","webpack:///./src/window.ts","webpack:///./src/fp.ts","webpack:///./src/mount.ts","webpack:///./~/sprezzatura/src/index.js","webpack:///./~/dift/lib/index.js","webpack:///./~/bit-vector/lib/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,4BAA4B,qBAAqB,8BAA8B,iBAAiB,GAAG;AACvH,sBAAqB,4BAA4B,cAAc,4BAA4B,iBAAiB,aAAa,GAAG;AAC5H,sBAAqB,mCAAmC,YAAY,kCAAkC,yBAAyB,GAAG;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B,MAAK;AACL,EAAC;AACD;AACA;AACA;;;;;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,6BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D,uBAAuB,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,MAAM,EAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,oDAAmD,gBAAgB,EAAE;AACrE;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT,MAAK;AACL;AACA;;;;;;;;;;AC9MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA,MAAK,EAAE,EAAE;AACT;AACA;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA,4BAA2B,8CAA8C;AACzE;AACA,yBAAwB,8CAA8C;AACtE;AACA;AACA;AACA;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,qBAAoB,+BAA+B;AACnD;AACA;AACA;AACA;AACA,iBAAgB;AAChB,MAAK;AACL;AACA;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,kBAAkB;AACjC;AACA,mBAAkB,gEAAgE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,eAAe;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA4D,kBAAkB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;;;;;;;;;;AC9SA;;AAEA;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;AACA;AACA;;AAEA,gBAAe;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAQ,sBAAsB;AAC9B;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,8BAA8B;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAqB,SAAS;AAC9B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yB;;;;;;;;;AC7JA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yB","file":"js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 156d798549fc09533f10\n **/","\"use strict\";\nexports.__esModule = true;\nvar acto_1 = require(\"acto\");\nvar keyboard_1 = require(\"./keyboard\");\nvar window_1 = require(\"./window\");\nvar fp_1 = require(\"./fp\");\nvar mount_1 = require(\"./mount\");\nvar initialMario = {\n    x: 0,\n    y: 0,\n    vx: 0,\n    vy: 0,\n    dir: 'LEFT'\n};\nfunction step(_a, mario) {\n    var delta = _a.delta, arrows = _a.arrows;\n    return fp_1.pipe(mario, [\n        [gravity, delta],\n        [jump, arrows],\n        [walk, arrows],\n        [physics, delta]\n    ]);\n}\nfunction jump(arrows, _a) {\n    var x = _a.x, y = _a.y, vx = _a.vx, vy = _a.vy, dir = _a.dir;\n    return { x: x, y: y, vx: vx, vy: arrows.y > 0 && vy == 0 ? 16.0 : vy, dir: dir };\n}\nfunction gravity(delta, _a) {\n    var x = _a.x, y = _a.y, vx = _a.vx, vy = _a.vy, dir = _a.dir;\n    return { x: x, y: y, vx: vx, vy: y > 0 ? vy - delta / 1.6 : 0, dir: dir };\n}\nfunction physics(delta, _a) {\n    var x = _a.x, y = _a.y, vx = _a.vx, vy = _a.vy, dir = _a.dir;\n    return {\n        x: x + delta * vx,\n        y: Math.max(0, y + delta * vy),\n        vx: vx,\n        vy: vy,\n        dir: dir\n    };\n}\nfunction walk(arrows, _a) {\n    var x = _a.x, y = _a.y, vx = _a.vx, vy = _a.vy, dir = _a.dir;\n    return {\n        x: x,\n        y: y,\n        vx: arrows.x * 2,\n        vy: vy,\n        dir: arrows.x < 0 ? 'LEFT' : arrows.x > 0 ? 'RIGHT' : dir\n    };\n}\n// ---------- DISPLAY ----------\n// WindowDimensions -> Mario -> VirtualDom\nfunction display(_a, mario) {\n    var w = _a.w, h = _a.h;\n    var verb = mario.y > 0 ? 'jump' : mario.vx !== 0 ? 'walk' : 'stand';\n    var dir = mario.dir === 'LEFT' ? 'left' : 'right';\n    var src = 'img/mario/' + verb + '/' + dir + '.gif';\n    return ['div', { style: \"width: \" + w + \"px; height: \" + h + \"px; background: rgb(174,238,238); position: fixed;\" }, [\n            ['div', { style: \"width: \" + w + \"px; height: 50px; background: rgb(74,167,43); position: fixed; bottom: 0px;\" }],\n            ['img', { src: src, style: \"position: fixed; z-index: 1; bottom: \" + (mario.y + 46) + \"px; left: \" + mario.x + \"px;\" }]\n        ]];\n}\n// ---------- SIGNALS ----------\nvar input = acto_1.map(function (_a, arrows) {\n    var prev = _a[0], current = _a[1];\n    return ({\n        delta: ((current - prev) / 20) || 0,\n        arrows: arrows || { x: 0, y: 0 }\n    });\n}, acto_1.slidingWindow(2, acto_1.fromAnimationFrames()), keyboard_1.fromArrows());\nvar states = acto_1.fold(step, initialMario, input);\nvar view = acto_1.map(display, window_1.fromWindowDimensions(), states);\nmount_1[\"default\"](document.body, view);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.ts\n ** module id = 0\n ** module chunks = 0\n **/","\"use strict\";\n// -------------------- CREATE\nfunction create(initialValue) {\n    return {\n        listeners: [],\n        active: true,\n        value: initialValue\n    };\n}\nexports.create = create;\nfunction fromCallback(f) {\n    var s = create();\n    f(function (v) {\n        send(s, v);\n        stop(s);\n    });\n    return s;\n}\nexports.fromCallback = fromCallback;\nfunction fromPromise(promise) {\n    var s = create();\n    promise\n        .then(function (v) {\n        send(s, v);\n        stop(s);\n    })\n        .catch(function (error) {\n        send(s, error instanceof Error ? error : new Error(error));\n    });\n    return s;\n}\nexports.fromPromise = fromPromise;\nfunction fromDomEvent(node, eventName) {\n    var s = create();\n    function listener(evt) { send(s, evt); }\n    s.stop = function () {\n        node.removeEventListener(eventName, listener, false);\n    };\n    node.addEventListener(eventName, listener, false);\n    return s;\n}\nexports.fromDomEvent = fromDomEvent;\nfunction fromInterval(time) {\n    var count = 0;\n    var s = create(count);\n    var interval = setInterval(function () {\n        count++;\n        send(s, count);\n    }, time);\n    s.stop = function () {\n        clearInterval(interval);\n    };\n    return s;\n}\nexports.fromInterval = fromInterval;\nfunction fromAnimationFrames() {\n    var s = create(0);\n    function step(time) {\n        send(s, time);\n        window.requestAnimationFrame(step);\n    }\n    window.requestAnimationFrame(step);\n    return s;\n}\nexports.fromAnimationFrames = fromAnimationFrames;\n// -------------------- INTERACT\nfunction listen(s, f) {\n    if (s.active)\n        s.listeners.push(f);\n    return s;\n}\nexports.listen = listen;\nfunction unlisten(s, f) {\n    s.listeners = s.listeners.filter(function (listener) { return listener !== f; });\n    return s;\n}\nexports.unlisten = unlisten;\nfunction send(s, v) {\n    if (s.active) {\n        s.value = v;\n        s.listeners.forEach(function (f) { f(v); });\n    }\n    return s;\n}\nexports.send = send;\nfunction stop(s) {\n    s.listeners = [];\n    s.active = false;\n    if (s.stop)\n        s.stop();\n    return s;\n}\nexports.stop = stop;\n// -------------------- TRANSFORM\nfunction map(f) {\n    var signals = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        signals[_i - 1] = arguments[_i];\n    }\n    var s2 = create();\n    signals.forEach(function (s3) {\n        listen(s3, function () {\n            var values = signals.map(function (s) { return s.value; });\n            send(s2, f.apply(null, values));\n        });\n    });\n    return s2;\n}\nexports.map = map;\nfunction filter(f, s) {\n    var s2 = create();\n    listen(s, function (v) {\n        if (f(v))\n            send(s2, v);\n    });\n    return s2;\n}\nexports.filter = filter;\nfunction dropRepeats(s) {\n    var s2 = create();\n    if (s.value)\n        send(s2, s.value);\n    listen(s, function (v) {\n        if (v !== s2.value)\n            send(s2, v);\n    });\n    return s2;\n}\nexports.dropRepeats = dropRepeats;\nfunction fold(f, seed, s) {\n    var s2 = create(seed);\n    listen(s, function (v) {\n        send(s2, seed = f(v, seed));\n    });\n    return s2;\n}\nexports.fold = fold;\nfunction merge() {\n    var signals = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        signals[_i - 0] = arguments[_i];\n    }\n    var s2 = create();\n    signals.forEach(function (s) {\n        listen(s, function (v) {\n            send(s2, v);\n        });\n    });\n    return s2;\n}\nexports.merge = merge;\nfunction sampleOn(s, s2) {\n    var s3 = create();\n    if (s.value)\n        send(s3, s.value);\n    listen(s2, function () {\n        send(s3, s.value);\n    });\n    return s3;\n}\nexports.sampleOn = sampleOn;\nfunction slidingWindow(length, s) {\n    var s2 = create();\n    var frame = [];\n    listen(s, function (v) {\n        if (frame.length > length - 1)\n            frame.shift();\n        frame.push(v);\n        send(s2, frame.slice());\n    });\n    return s2;\n}\nexports.slidingWindow = slidingWindow;\nfunction flatMap(lift, s) {\n    var s2 = create();\n    listen(s, function (v1) {\n        listen(lift(v1), function (v2) {\n            send(s2, v2);\n        });\n    });\n    return s2;\n}\nexports.flatMap = flatMap;\nfunction flatMapLatest(lift, s) {\n    var s2 = create();\n    var s3;\n    listen(s, function (v1) {\n        if (s3)\n            stop(s3);\n        s3 = lift(v1);\n        listen(s3, function (v2) {\n            send(s2, v2);\n        });\n    });\n    return s2;\n}\nexports.flatMapLatest = flatMapLatest;\nfunction debounce(s, quiet) {\n    return flatMapLatest(function (v) {\n        return fromCallback(function (cback) {\n            setTimeout(function () {\n                cback(v);\n            }, quiet);\n        });\n    }, s);\n}\nexports.debounce = debounce;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/acto/src/index.js\n ** module id = 1\n ** module chunks = 0\n **/","\"use strict\";\nexports.__esModule = true;\nvar acto_1 = require(\"acto\");\nexports.UP = 38;\nexports.LEFT = 37;\nexports.RIGHT = 39;\nexports.DOWN = 40;\nfunction fromKeysDown() {\n    var keysDown = {};\n    var s = acto_1.create(keysDown);\n    window.onkeydown = function (e) {\n        keysDown[String(e.keyCode)] = true;\n        acto_1.send(s, keysDown);\n    };\n    window.onkeyup = function (e) {\n        delete keysDown[String(e.keyCode)];\n        acto_1.send(s, keysDown);\n    };\n    return s;\n}\nexports.fromKeysDown = fromKeysDown;\nfunction fromArrows() {\n    return acto_1.map(function (keys) { return ({\n        x: keys[exports.LEFT] ? (keys[exports.RIGHT] ? 0 : -1) : keys[exports.RIGHT] ? (keys[exports.LEFT] ? 0 : 1) : 0,\n        y: keys[exports.DOWN] ? (keys[exports.UP] ? 0 : -1) : keys[exports.UP] ? (keys[exports.DOWN] ? 0 : 1) : 0\n    }); }, fromKeysDown());\n}\nexports.fromArrows = fromArrows;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/keyboard.ts\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\nexports.__esModule = true;\nvar acto_1 = require(\"acto\");\nfunction fromWindowDimensions() {\n    var s = acto_1.create({ w: window.innerWidth, h: window.innerHeight });\n    window.onresize = function () {\n        acto_1.send(s, { w: window.innerWidth, h: window.innerHeight });\n    };\n    return s;\n}\nexports.fromWindowDimensions = fromWindowDimensions;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/window.ts\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\nexports.__esModule = true;\nfunction pipe(obj, funcs) {\n    return funcs.reduce(function (prev, f) {\n        return f[0].apply(null, f.slice(1).concat([prev]));\n    }, obj);\n}\nexports.pipe = pipe;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/fp.ts\n ** module id = 4\n ** module chunks = 0\n **/","\"use strict\";\nexports.__esModule = true;\nvar acto_1 = require(\"acto\");\nvar sprezzatura_1 = require(\"sprezzatura\");\n// DomNode -> Sig VDom -> Sig { domNode: DomNode, vDom: VDom }\nfunction mount(domParent, vDoms) {\n    var div = document.createElement('div');\n    var intialUI = { domNode: div, vDom: ['div', {}, []] };\n    domParent.appendChild(div);\n    return acto_1.fold(function (nextVDom, _a) {\n        var domNode = _a.domNode, vDom = _a.vDom;\n        sprezzatura_1.updateDom(vDom, nextVDom, domNode, domParent);\n        return { domNode: domNode, vDom: nextVDom };\n    }, intialUI, vDoms);\n}\nexports[\"default\"] = mount;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/mount.ts\n ** module id = 5\n ** module chunks = 0\n **/","\"use strict\";\nvar dift_1 = require('dift');\nvar STRING = 'string';\nvar NUMBER = 'number';\nvar FUNCTION = 'function';\nvar KEY = 'key';\nvar VALUE = 'value';\nvar CHECKED = 'checked';\nvar SELECTED = 'selected';\nvar DISABLED = 'disabled';\nvar FOCUS = 'focus';\nvar ON = 'on';\nvar EMPTYSTRING = '';\nvar VOID_ELEMENTS = { area: 1, base: 1, br: 1, col: 1, command: 1, embed: 1, hr: 1, img: 1, input: 1, keygen: 1, link: 1, meta: 1, param: 1, source: 1, track: 1, wbr: 1 };\nvar VATOM = 0;\nvar VNODE = 1;\nvar VCHILD = 2;\nvar VNULL = 3;\nfunction getType(vDom) {\n    if (vDom instanceof Array) {\n        return typeof vDom[0] === FUNCTION ? VCHILD : VNODE;\n    }\n    else if (typeof vDom === STRING || typeof vDom === NUMBER) {\n        return VATOM;\n    }\n    else {\n        return VNULL;\n    }\n}\nfunction keyOf(v, i) {\n    return (v instanceof Array && v[1] && v[1].key) || i;\n}\nfunction groupChildren(vDoms, DChildren) {\n    var res = [];\n    var v;\n    var i;\n    for (i = 0; i < vDoms.length; i++) {\n        v = vDoms[i];\n        res.push({ key: keyOf(v, i), vDom: v, element: DChildren && DChildren[i] });\n    }\n    return res;\n}\nfunction getKey(v) {\n    return v.key;\n}\nfunction isDefined(v) {\n    return !(v === false || v === undefined || v === null);\n}\nfunction updateChildren(current, next, D) {\n    next[2] = next[2] ? next[2].filter(isDefined) : []; // !! mutates vDom !!\n    dift_1[\"default\"](groupChildren(current[2] || [], D.childNodes), groupChildren(next[2]), function effect(type, current, next, pos) {\n        var newNode;\n        switch (type) {\n            case dift_1.CREATE:\n                newNode = vDomToDom(next.vDom);\n                if (newNode)\n                    D.insertBefore(newNode, D.childNodes[pos] || null);\n                break;\n            case dift_1.UPDATE:\n                updateDom(current.vDom, next.vDom, current.element, D);\n                break;\n            case dift_1.MOVE:\n                D.insertBefore(updateDom(current.vDom, next.vDom, current.element, D), current.element);\n                break;\n            case dift_1.REMOVE:\n                D.removeChild(current.element);\n                break;\n        }\n    }, getKey);\n    return D;\n}\nfunction updateDom(current, next, D, DParent) {\n    if (D === undefined) {\n        throw new Error('No dom node to update');\n    }\n    if (current === next) {\n        return;\n    }\n    var currentExists = current !== undefined;\n    var nextExists = next !== undefined;\n    var newNode;\n    if (!currentExists && nextExists) {\n        newNode = vDomToDom(next);\n        if (newNode) {\n            DParent.appendChild(newNode);\n        }\n    }\n    else if (currentExists && !nextExists) {\n        DParent.removeChild(D);\n    }\n    else if (currentExists && nextExists) {\n        var currentType = getType(current);\n        var nextType = getType(next);\n        if (shouldExploreFurther(current, next, currentType, nextType)) {\n            switch (nextType) {\n                case VNODE:\n                    updateAttributes(current[1] || {}, next[1] || {}, D);\n                    updateChildren(current, next, D);\n                    break;\n                case VCHILD:\n                    if (next[0].shouldUpdate ?\n                        next[0].shouldUpdate(current[1], next[1]) :\n                        next[1] && current[1] && next[1] !== current[1]) {\n                        next[2] = next[0](next[1]);\n                        updateAttributes(current[2][1] || {}, next[2][1] || {}, D);\n                        updateChildren(current[2], next[2], D);\n                    }\n                    else {\n                        next[2] = current[2];\n                    }\n                    break;\n            }\n        }\n        else if (current !== next) {\n            newNode = vDomToDom(next);\n            if (newNode) {\n                DParent.replaceChild(newNode, D);\n            }\n        }\n    }\n    return D;\n}\nexports.updateDom = updateDom;\nfunction updateAttributes(currentAttrs, nextAttrs, D) {\n    var a;\n    var currentVal;\n    var nextVal;\n    var evt;\n    var currentEvts = currentAttrs[ON];\n    var nextEvts = nextAttrs[ON];\n    for (a in currentAttrs) {\n        currentVal = currentAttrs[a];\n        nextVal = nextAttrs[a];\n        if (nextVal === undefined || nextVal === null || nextVal === false) {\n            switch (a) {\n                case ON:\n                case KEY:\n                    break;\n                case CHECKED:\n                case DISABLED:\n                case SELECTED:\n                    D[a] = false;\n                    break;\n                case VALUE:\n                    D['value'] = EMPTYSTRING;\n                    break;\n                case FOCUS:\n                    D['blur']();\n                    break;\n                default:\n                    D['removeAttribute'](a);\n                    break;\n            }\n        }\n    }\n    for (a in nextAttrs) {\n        currentVal = currentAttrs[a];\n        nextVal = nextAttrs[a];\n        if (!(nextVal === undefined || nextVal === null || nextVal === false) &&\n            nextVal !== currentVal &&\n            typeof nextVal !== FUNCTION) {\n            switch (a) {\n                case ON:\n                case KEY:\n                    break;\n                case CHECKED:\n                case DISABLED:\n                case SELECTED:\n                case VALUE:\n                    D[a] = nextVal;\n                    break;\n                case FOCUS:\n                    D['focus']();\n                    break;\n                default:\n                    D['setAttribute'](a, nextVal);\n                    break;\n            }\n        }\n    }\n    // update event listeners\n    if (currentEvts && !nextEvts) {\n        for (evt in currentEvts) {\n            D.removeEventListener(evt, currentEvts[evt]);\n        }\n    }\n    else if (!currentEvts && nextEvts) {\n        for (evt in nextEvts) {\n            D.addEventListener(evt, nextEvts[evt]);\n        }\n    }\n    else if (currentEvts && nextEvts) {\n        for (evt in currentEvts) {\n            if (!nextEvts[evt]) {\n                D.removeEventListener(evt, currentEvts[evt]);\n            }\n        }\n        for (evt in nextEvts) {\n            if (currentEvts[evt] !== nextEvts[evt]) {\n                if (currentEvts[evt]) {\n                    D.removeEventListener(evt, currentEvts[evt]);\n                }\n                D.addEventListener(evt, nextEvts[evt]);\n            }\n        }\n    }\n    return D;\n}\nfunction shouldExploreFurther(current, next, currentType, nextType) {\n    return currentType === nextType &&\n        (currentType === VNODE || currentType === VCHILD) &&\n        current[0] === next[0];\n}\nfunction vDomToHtmlString(vDom) {\n    switch (getType(vDom)) {\n        case VCHILD:\n            vDom[2] = vDom[0](vDom[1]);\n            return vNodeToHtmlString(vDom[2]);\n        case VNODE:\n            return vNodeToHtmlString(vDom);\n        case VATOM:\n            return '<span>' + vDom + '</span>';\n        default:\n            return '';\n    }\n}\nexports.vDomToHtmlString = vDomToHtmlString;\nfunction vNodeToHtmlString(vDom) {\n    var tag = vDom[0];\n    var attrs = vDom[1];\n    var children;\n    var val;\n    var a;\n    var attrPairs = [];\n    var c;\n    var res;\n    vDom[2] = vDom[2] ? vDom[2].filter(isDefined) : []; // !! mutates vDom !!\n    children = vDom[2];\n    if (attrs) {\n        for (a in attrs) {\n            val = attrs[a];\n            if (!(val === undefined || val === null || val === false) && a !== KEY && a !== ON) {\n                attrPairs.push(a + '=\"' + val + '\"');\n            }\n        }\n    }\n    res = '<' + [tag].concat(attrPairs).join(' ') + '>';\n    if (!VOID_ELEMENTS[tag]) {\n        for (c = 0; c < children.length; c++) {\n            if (!(c === undefined || c === null || c === false)) {\n                res += vDomToHtmlString(children[c]);\n            }\n        }\n        res += '</' + tag + '>';\n    }\n    return res;\n}\nexports.vNodeToHtmlString = vNodeToHtmlString;\nfunction vDomToDom(vDom) {\n    switch (getType(vDom)) {\n        case VATOM:\n        case VNODE:\n        case VCHILD:\n            if (vDom['length'] === 0)\n                return undefined;\n            var el = document.createElement('div');\n            el.innerHTML = vDomToHtmlString(vDom);\n            var dom = el.firstChild;\n            bindEvents(vDom, dom);\n            return dom;\n        case VNULL:\n            return undefined;\n    }\n}\nexports.vDomToDom = vDomToDom;\nfunction bindEvents(vDom, D) {\n    var vType = getType(vDom);\n    var vNode;\n    var vAttrs;\n    var evts;\n    var evt;\n    var child;\n    var children;\n    if (vType === VATOM || vType === VNULL) {\n        return;\n    }\n    vNode = vType === VCHILD ? vDom[2] : vDom;\n    vAttrs = vNode[1];\n    children = vNode[2];\n    if (vAttrs) {\n        evts = vAttrs[ON];\n        if (evts) {\n            for (evt in evts) {\n                D.addEventListener(evt, evts[evt]);\n            }\n        }\n    }\n    if (children) {\n        for (child = 0; child < children.length; child++) {\n            bindEvents(children[child], D.childNodes[child]);\n        }\n    }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sprezzatura/src/index.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.REMOVE = exports.MOVE = exports.UPDATE = exports.CREATE = undefined;\n\nvar _bitVector = require('bit-vector');\n\n/**\n * Actions\n */\n\nvar CREATE = 0; /**\n                 * Imports\n                 */\n\nvar UPDATE = 1;\nvar MOVE = 2;\nvar REMOVE = 3;\n\n/**\n * dift\n */\n\nfunction dift(prev, next, effect, key) {\n  var pStartIdx = 0;\n  var nStartIdx = 0;\n  var pEndIdx = prev.length - 1;\n  var nEndIdx = next.length - 1;\n  var pStartItem = prev[pStartIdx];\n  var nStartItem = next[nStartIdx];\n\n  // List head is the same\n  while (pStartIdx <= pEndIdx && nStartIdx <= nEndIdx && equal(pStartItem, nStartItem)) {\n    effect(UPDATE, pStartItem, nStartItem, nStartIdx);\n    pStartItem = prev[++pStartIdx];\n    nStartItem = next[++nStartIdx];\n  }\n\n  // The above case is orders of magnitude more common than the others, so fast-path it\n  if (nStartIdx > nEndIdx && pStartIdx > pEndIdx) {\n    return;\n  }\n\n  var pEndItem = prev[pEndIdx];\n  var nEndItem = next[nEndIdx];\n  var movedFromFront = 0;\n\n  // Reversed\n  while (pStartIdx <= pEndIdx && nStartIdx <= nEndIdx && equal(pStartItem, nEndItem)) {\n    effect(MOVE, pStartItem, nEndItem, pEndIdx - movedFromFront + 1);\n    pStartItem = prev[++pStartIdx];\n    nEndItem = next[--nEndIdx];\n    ++movedFromFront;\n  }\n\n  // Reversed the other way (in case of e.g. reverse and append)\n  while (pEndIdx >= pStartIdx && nStartIdx <= nEndIdx && equal(nStartItem, pEndItem)) {\n    effect(MOVE, pEndItem, nStartItem, nStartIdx);\n    pEndItem = prev[--pEndIdx];\n    nStartItem = next[++nStartIdx];\n    --movedFromFront;\n  }\n\n  // List tail is the same\n  while (pEndIdx >= pStartIdx && nEndIdx >= nStartIdx && equal(pEndItem, nEndItem)) {\n    effect(UPDATE, pEndItem, nEndItem, nEndIdx);\n    pEndItem = prev[--pEndIdx];\n    nEndItem = next[--nEndIdx];\n  }\n\n  if (pStartIdx > pEndIdx) {\n    while (nStartIdx <= nEndIdx) {\n      effect(CREATE, null, nStartItem, nStartIdx);\n      nStartItem = next[++nStartIdx];\n    }\n\n    return;\n  }\n\n  if (nStartIdx > nEndIdx) {\n    while (pStartIdx <= pEndIdx) {\n      effect(REMOVE, pStartItem);\n      pStartItem = prev[++pStartIdx];\n    }\n\n    return;\n  }\n\n  var created = 0;\n  var pivotDest = null;\n  var pivotIdx = pStartIdx - movedFromFront;\n  var keepBase = pStartIdx;\n  var keep = (0, _bitVector.createBv)(pEndIdx - pStartIdx);\n\n  var prevMap = keyMap(prev, pStartIdx, pEndIdx + 1, key);\n\n  for (; nStartIdx <= nEndIdx; nStartItem = next[++nStartIdx]) {\n    var oldIdx = prevMap[key(nStartItem)];\n\n    if (isUndefined(oldIdx)) {\n      effect(CREATE, null, nStartItem, pivotIdx++);\n      ++created;\n    } else if (pStartIdx !== oldIdx) {\n      (0, _bitVector.setBit)(keep, oldIdx - keepBase);\n      effect(MOVE, prev[oldIdx], nStartItem, pivotIdx++);\n    } else {\n      pivotDest = nStartIdx;\n    }\n  }\n\n  if (pivotDest !== null) {\n    (0, _bitVector.setBit)(keep, 0);\n    effect(MOVE, prev[pStartIdx], next[pivotDest], pivotDest);\n  }\n\n  // If there are no creations, then you have to\n  // remove exactly max(prevLen - nextLen, 0) elements in this\n  // diff. You have to remove one more for each element\n  // that was created. This means once we have\n  // removed that many, we can stop.\n  var necessaryRemovals = prev.length - next.length + created;\n  for (var removals = 0; removals < necessaryRemovals; pStartItem = prev[++pStartIdx]) {\n    if (!(0, _bitVector.getBit)(keep, pStartIdx - keepBase)) {\n      effect(REMOVE, pStartItem);\n      ++removals;\n    }\n  }\n\n  function equal(a, b) {\n    return key(a) === key(b);\n  }\n}\n\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\nfunction keyMap(items, start, end, key) {\n  var map = {};\n\n  for (var i = start; i < end; ++i) {\n    map[key(items[i])] = i;\n  }\n\n  return map;\n}\n\n/**\n * Exports\n */\n\nexports.default = dift;\nexports.CREATE = CREATE;\nexports.UPDATE = UPDATE;\nexports.MOVE = MOVE;\nexports.REMOVE = REMOVE;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/dift/lib/index.js\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Use typed arrays if we can\n */\n\nvar FastArray = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\n\n/**\n * Bit vector\n */\n\nfunction createBv(sizeInBits) {\n  return new FastArray(Math.ceil(sizeInBits / 32));\n}\n\nfunction setBit(v, idx) {\n  var r = idx % 32;\n  var pos = (idx - r) / 32;\n\n  v[pos] |= 1 << r;\n}\n\nfunction clearBit(v, idx) {\n  var r = idx % 32;\n  var pos = (idx - r) / 32;\n\n  v[pos] &= ~(1 << r);\n}\n\nfunction getBit(v, idx) {\n  var r = idx % 32;\n  var pos = (idx - r) / 32;\n\n  return !!(v[pos] & 1 << r);\n}\n\n/**\n * Exports\n */\n\nexports.createBv = createBv;\nexports.setBit = setBit;\nexports.clearBit = clearBit;\nexports.getBit = getBit;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bit-vector/lib/index.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}